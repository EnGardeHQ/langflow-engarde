# Stable EnGarde Langflow - Railway Compatible
FROM langflowai/langflow:latest

USER root

# Install curl for health checks
RUN apt-get update && apt-get install -y --no-install-recommends curl && \
    rm -rf /var/lib/apt/lists/*

# Set environment variables
ENV LANGFLOW_HOST=0.0.0.0
ENV LANGFLOW_AUTO_LOGIN=true

USER user
WORKDIR /app

EXPOSE 7860

# Use shell form to allow PORT variable expansion
CMD langflow run --host 0.0.0.0 --port ${PORT:-7860}
